<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="439px" preserveAspectRatio="none" style="width:843px;height:439px;background:#003153;" version="1.1" viewBox="0 0 843 439" width="843px" zoomAndPan="magnify"><defs/><g><line style="stroke:#D9D3D0;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="63" x2="63" y1="36.2969" y2="403.8906"/><line style="stroke:#D9D3D0;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="217" x2="217" y1="36.2969" y2="403.8906"/><line style="stroke:#D9D3D0;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="625" x2="625" y1="36.2969" y2="403.8906"/><line style="stroke:#D9D3D0;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="784" x2="784" y1="36.2969" y2="403.8906"/><rect fill="#003153" height="30.2969" rx="2.5" ry="2.5" style="stroke:#D9D3D0;stroke-width:1.0;" width="86" x="20" y="5"/><text fill="#D9D3D0" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="72" x="27" y="24.9951">Consumer</text><rect fill="#003153" height="30.2969" rx="2.5" ry="2.5" style="stroke:#D9D3D0;stroke-width:1.0;" width="86" x="20" y="402.8906"/><text fill="#D9D3D0" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="72" x="27" y="422.8857">Consumer</text><rect fill="#003153" height="30.2969" rx="2.5" ry="2.5" style="stroke:#D9D3D0;stroke-width:1.0;" width="80" x="177" y="5"/><text fill="#D9D3D0" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="66" x="184" y="24.9951">Web Site</text><rect fill="#003153" height="30.2969" rx="2.5" ry="2.5" style="stroke:#D9D3D0;stroke-width:1.0;" width="80" x="177" y="402.8906"/><text fill="#D9D3D0" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="66" x="184" y="422.8857">Web Site</text><rect fill="#003153" height="30.2969" rx="2.5" ry="2.5" style="stroke:#D9D3D0;stroke-width:1.0;" width="152" x="549" y="5"/><text fill="#D9D3D0" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="138" x="556" y="24.9951">EasyCard Checkout</text><rect fill="#003153" height="30.2969" rx="2.5" ry="2.5" style="stroke:#D9D3D0;stroke-width:1.0;" width="152" x="549" y="402.8906"/><text fill="#D9D3D0" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="138" x="556" y="422.8857">EasyCard Checkout</text><rect fill="#003153" height="30.2969" rx="2.5" ry="2.5" style="stroke:#D9D3D0;stroke-width:1.0;" width="106" x="731" y="5"/><text fill="#D9D3D0" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="92" x="738" y="24.9951">EasyCard API</text><rect fill="#003153" height="30.2969" rx="2.5" ry="2.5" style="stroke:#D9D3D0;stroke-width:1.0;" width="106" x="731" y="402.8906"/><text fill="#D9D3D0" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="92" x="738" y="422.8857">EasyCard API</text><polygon fill="#D9D3D0" points="205,63.4297,215,67.4297,205,71.4297,209,67.4297" style="stroke:#D9D3D0;stroke-width:1.0;"/><line style="stroke:#D9D3D0;stroke-width:1.0;" x1="63" x2="211" y1="67.4297" y2="67.4297"/><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="92" x="70" y="62.3638">start payment</text><line style="stroke:#D9D3D0;stroke-width:1.0;" x1="217" x2="259" y1="96.5625" y2="96.5625"/><line style="stroke:#D9D3D0;stroke-width:1.0;" x1="259" x2="259" y1="96.5625" y2="109.5625"/><line style="stroke:#D9D3D0;stroke-width:1.0;" x1="218" x2="259" y1="109.5625" y2="109.5625"/><polygon fill="#D9D3D0" points="228,105.5625,218,109.5625,228,113.5625,224,109.5625" style="stroke:#D9D3D0;stroke-width:1.0;"/><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="137" x="224" y="91.4966">get buyer's EasyCard</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="92" x="365" y="91.4966">ConsumerID</text><polygon fill="#D9D3D0" points="772,149.8281,782,153.8281,772,157.8281,776,153.8281" style="stroke:#D9D3D0;stroke-width:1.0;"/><line style="stroke:#D9D3D0;stroke-width:1.0;" x1="217" x2="778" y1="153.8281" y2="153.8281"/><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="41" x="224" y="133.6294">create</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="120" x="269" y="133.6294">Payment Intent</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="100" x="393" y="133.6294">with Amount=0</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="88" x="228" y="148.7622">using existing</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="92" x="320" y="148.7622">ConsumerID</text><polygon fill="#D9D3D0" points="228,178.9609,218,182.9609,228,186.9609,224,182.9609" style="stroke:#D9D3D0;stroke-width:1.0;"/><line style="stroke:#D9D3D0;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="222" x2="783" y1="182.9609" y2="182.9609"/><text fill="#D9D3D0" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="120" x="234" y="177.895">Payment Intent</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="16" x="358" y="177.895">url</text><polygon fill="#D9D3D0" points="613,208.0938,623,212.0938,613,216.0938,617,212.0938" style="stroke:#D9D3D0;stroke-width:1.0;"/><line style="stroke:#D9D3D0;stroke-width:1.0;" x1="217" x2="619" y1="212.0938" y2="212.0938"/><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="32" x="224" y="207.0278">open</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="120" x="260" y="207.0278">Payment Intent</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="16" x="384" y="207.0278">url</text><polygon fill="#D9D3D0" points="613,237.2266,623,241.2266,613,245.2266,617,241.2266" style="stroke:#D9D3D0;stroke-width:1.0;"/><line style="stroke:#D9D3D0;stroke-width:1.0;" x1="63" x2="619" y1="241.2266" y2="241.2266"/><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="264" x="70" y="236.1606">fill credit card details to save in EasyCard</text><polygon fill="#D9D3D0" points="228,281.4922,218,285.4922,228,289.4922,224,285.4922" style="stroke:#D9D3D0;stroke-width:1.0;"/><line style="stroke:#D9D3D0;stroke-width:1.0;" x1="222" x2="624" y1="285.4922" y2="285.4922"/><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="187" x="234" y="265.2935">redirect to confirmation page</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="384" x="234" y="280.4263">only saved credit card TokenID will be added to query string</text><polygon fill="#D9D3D0" points="772,310.625,782,314.625,772,318.625,776,314.625" style="stroke:#D9D3D0;stroke-width:1.0;"/><line style="stroke:#D9D3D0;stroke-width:1.0;" x1="217" x2="778" y1="314.625" y2="314.625"/><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="432" x="224" y="309.5591">create Billing Deal record using CreditCardTokenID and ConsumerID</text><line style="stroke:#D9D3D0;stroke-width:1.0;" x1="217" x2="259" y1="343.7578" y2="343.7578"/><line style="stroke:#D9D3D0;stroke-width:1.0;" x1="259" x2="259" y1="343.7578" y2="356.7578"/><line style="stroke:#D9D3D0;stroke-width:1.0;" x1="218" x2="259" y1="356.7578" y2="356.7578"/><polygon fill="#D9D3D0" points="228,352.7578,218,356.7578,228,360.7578,224,356.7578" style="stroke:#D9D3D0;stroke-width:1.0;"/><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="152" x="224" y="338.6919">store Billing Deal details</text><polygon fill="#D9D3D0" points="74,381.8906,64,385.8906,74,389.8906,70,385.8906" style="stroke:#D9D3D0;stroke-width:1.0;"/><line style="stroke:#D9D3D0;stroke-width:1.0;" x1="68" x2="216" y1="385.8906" y2="385.8906"/><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="130" x="80" y="380.8247">payment completed</text><!--MD5=[3883dbb23b0d071fdc455729f386beca]
@startuml
!theme blueprint

participant "Consumer" as consumer
participant "Web Site" as website
participant "EasyCard Checkout" as checkout
participant "EasyCard API" as api

consumer->website: start payment
website->website: get buyer's EasyCard <b>ConsumerID</b>
website->api: create <b>Payment Intent</b> with Amount=0\n using existing <b>ConsumerID</b>
api- ->website: <b>Payment Intent</b> url
website->checkout : open <b>Payment Intent</b> url
consumer->checkout : fill credit card details to save in EasyCard
checkout->website: redirect to confirmation page\nonly saved credit card TokenID will be added to query string
website->api:create Billing Deal record using CreditCardTokenID and ConsumerID
website->website: store Billing Deal details
website->consumer: payment completed
@enduml

@startuml





<style>
  root {
    BackgroundColor #003153
    FontColor #D9D3D0
    FontName Verdana
    HyperLinkColor #D9D3D0
    LineColor #D9D3D0
    LineThickness 1
    Margin 5
  }
  caption {
    LineThickness 0
  }
  footer {
    LineThickness 0
  }
  header {
    LineThickness 0
  }
  node {
    MaximumWidth 300
  }
  title {
    FontSize 22
    LineThickness 0
  }
</style>

skinparam ArrowLollipopColor #D9D3D0
skinparam BackgroundColor #003153
skinparam DefaultFontName Verdana
skinparam DefaultMonospacedFontName Courier
skinparam LifelineStrategy nosolid
skinparam ParticipantPadding 10
skinparam SequenceLifeLineBorderColor #D9D3D0
skinparam Shadowing false
skinparam UseBetaStyle true

skinparam Activity {
  BackgroundColor #003153
  BarColor #D9D3D0
  BorderColor #D9D3D0
  FontColor #D9D3D0
  FontName Verdana
}
skinparam Boundary {
  FontColor #D9D3D0
}
skinparam Box {
  Padding 5
}
skinparam CircledCharacter {
  FontColor #D9D3D0
  FontName Courier
  Radius 9
}
skinparam Class {
  BackgroundColor #003153
  BorderColor #D9D3D0
  FontColor #D9D3D0
  FontName Verdana
}
skinparam ClassAttribute {
  FontColor #D9D3D0
  FontName Verdana
}
skinparam ClassStereotype {
  FontColor #D9D3D0
  FontName Verdana
}
skinparam Footer {
  FontColor #D9D3D0
  FontName Verdana
}
skinparam Header {
  FontColor #D9D3D0
  FontName Verdana
}
skinparam Hyperlink {
  Color #D9D3D0
}
skinparam IconPackage {
  Color #D9D3D0
  BackgroundColor #003153
}
skinparam IconPrivate {
  Color #D9D3D0
  BackgroundColor #003153
}
skinparam IconProtected {
  Color #D9D3D0
  BackgroundColor #003153
}
skinparam IconPublic {
  Color #D9D3D0
  BackgroundColor #003153
}
skinparam Note {
  FontColor #D9D3D0
  FontName Verdana
}
skinparam Object {
  BorderColor #D9D3D0
}
skinparam Package {
  BorderColor #D9D3D0
  FontColor #D9D3D0
  FontName Verdana
}
skinparam State {
  BackgroundColor #003153
  BorderColor #D9D3D0
}
skinparam StereotypeA {
  BackgroundColor #003153
  BorderColor #D9D3D0
}
skinparam StereotypeC {
  BackgroundColor #003153
  BorderColor #D9D3D0
}
skinparam StereotypeE {
  BackgroundColor #003153
  BorderColor #D9D3D0
}
skinparam StereotypeI {
  BackgroundColor #003153
  BorderColor #D9D3D0
}
skinparam StereotypeN {
  BackgroundColor #003153
  BorderColor #D9D3D0
}
skinparam UseCaseStereoType {
  FontColor #D9D3D0
  FontName Verdana
}

participant "Consumer" as consumer
participant "Web Site" as website
participant "EasyCard Checkout" as checkout
participant "EasyCard API" as api

consumer->website: start payment
website->website: get buyer's EasyCard <b>ConsumerID</b>
website->api: create <b>Payment Intent</b> with Amount=0\n using existing <b>ConsumerID</b>
api- ->website: <b>Payment Intent</b> url
website->checkout : open <b>Payment Intent</b> url
consumer->checkout : fill credit card details to save in EasyCard
checkout->website: redirect to confirmation page\nonly saved credit card TokenID will be added to query string
website->api:create Billing Deal record using CreditCardTokenID and ConsumerID
website->website: store Billing Deal details
website->consumer: payment completed
@enduml

PlantUML version 1.2022.10beta1(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>