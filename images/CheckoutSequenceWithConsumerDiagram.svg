<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="527px" preserveAspectRatio="none" style="width:773px;height:527px;background:#003153;" version="1.1" viewBox="0 0 773 527" width="773px" zoomAndPan="magnify"><defs/><g><line style="stroke:#D9D3D0;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="63" x2="63" y1="36.2969" y2="492.2891"/><line style="stroke:#D9D3D0;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="217" x2="217" y1="36.2969" y2="492.2891"/><line style="stroke:#D9D3D0;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="546" x2="546" y1="36.2969" y2="492.2891"/><line style="stroke:#D9D3D0;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="714" x2="714" y1="36.2969" y2="492.2891"/><rect fill="#003153" height="30.2969" rx="2.5" ry="2.5" style="stroke:#D9D3D0;stroke-width:1.0;" width="86" x="20" y="5"/><text fill="#D9D3D0" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="72" x="27" y="24.9951">Consumer</text><rect fill="#003153" height="30.2969" rx="2.5" ry="2.5" style="stroke:#D9D3D0;stroke-width:1.0;" width="86" x="20" y="491.2891"/><text fill="#D9D3D0" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="72" x="27" y="511.2842">Consumer</text><rect fill="#003153" height="30.2969" rx="2.5" ry="2.5" style="stroke:#D9D3D0;stroke-width:1.0;" width="80" x="177" y="5"/><text fill="#D9D3D0" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="66" x="184" y="24.9951">Web Site</text><rect fill="#003153" height="30.2969" rx="2.5" ry="2.5" style="stroke:#D9D3D0;stroke-width:1.0;" width="80" x="177" y="491.2891"/><text fill="#D9D3D0" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="66" x="184" y="511.2842">Web Site</text><rect fill="#003153" height="30.2969" rx="2.5" ry="2.5" style="stroke:#D9D3D0;stroke-width:1.0;" width="152" x="470" y="5"/><text fill="#D9D3D0" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="138" x="477" y="24.9951">EasyCard Checkout</text><rect fill="#003153" height="30.2969" rx="2.5" ry="2.5" style="stroke:#D9D3D0;stroke-width:1.0;" width="152" x="470" y="491.2891"/><text fill="#D9D3D0" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="138" x="477" y="511.2842">EasyCard Checkout</text><rect fill="#003153" height="30.2969" rx="2.5" ry="2.5" style="stroke:#D9D3D0;stroke-width:1.0;" width="106" x="661" y="5"/><text fill="#D9D3D0" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="92" x="668" y="24.9951">EasyCard API</text><rect fill="#003153" height="30.2969" rx="2.5" ry="2.5" style="stroke:#D9D3D0;stroke-width:1.0;" width="106" x="661" y="491.2891"/><text fill="#D9D3D0" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="92" x="668" y="511.2842">EasyCard API</text><polygon fill="#D9D3D0" points="205,63.4297,215,67.4297,205,71.4297,209,67.4297" style="stroke:#D9D3D0;stroke-width:1.0;"/><line style="stroke:#D9D3D0;stroke-width:1.0;" x1="63" x2="211" y1="67.4297" y2="67.4297"/><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="92" x="70" y="62.3638">start payment</text><polygon fill="#D9D3D0" points="702,92.5625,712,96.5625,702,100.5625,706,96.5625" style="stroke:#D9D3D0;stroke-width:1.0;"/><line style="stroke:#D9D3D0;stroke-width:1.0;" x1="217" x2="708" y1="96.5625" y2="96.5625"/><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="85" x="224" y="91.4966">"Find existing</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="82" x="313" y="91.4966">consumers</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="298" x="399" y="91.4966">(by NationalID, ExternalReference, Email etc.)"</text><polygon fill="#D9D3D0" points="228,121.6953,218,125.6953,228,129.6953,224,125.6953" style="stroke:#D9D3D0;stroke-width:1.0;"/><line style="stroke:#D9D3D0;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="222" x2="713" y1="125.6953" y2="125.6953"/><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="147" x="234" y="120.6294">Existing consumers list</text><polygon fill="#D9D3D0" points="702,150.8281,712,154.8281,702,158.8281,706,154.8281" style="stroke:#D9D3D0;stroke-width:1.0;"/><line style="stroke:#D9D3D0;stroke-width:1.0;" x1="217" x2="708" y1="154.8281" y2="154.8281"/><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="79" x="224" y="149.7622">"Create new</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="76" x="307" y="149.7622">Consumer</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="301" x="387" y="149.7622">record if consumer does not exist in EasyCard"</text><polygon fill="#D9D3D0" points="228,179.9609,218,183.9609,228,187.9609,224,183.9609" style="stroke:#D9D3D0;stroke-width:1.0;"/><line style="stroke:#D9D3D0;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="222" x2="713" y1="183.9609" y2="183.9609"/><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="33" x="234" y="178.895">"New</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="76" x="271" y="178.895">Consumer</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="63" x="351" y="178.895">record ID"</text><polygon fill="#D9D3D0" points="702,209.0938,712,213.0938,702,217.0938,706,213.0938" style="stroke:#D9D3D0;stroke-width:1.0;"/><line style="stroke:#D9D3D0;stroke-width:1.0;" x1="217" x2="708" y1="213.0938" y2="213.0938"/><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="46" x="224" y="208.0278">"create</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="120" x="274" y="208.0278">Payment Intent</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="188" x="398" y="208.0278">- use ConsumerID in request"</text><polygon fill="#D9D3D0" points="228,238.2266,218,242.2266,228,246.2266,224,242.2266" style="stroke:#D9D3D0;stroke-width:1.0;"/><line style="stroke:#D9D3D0;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="222" x2="713" y1="242.2266" y2="242.2266"/><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="5" x="234" y="237.1606">"</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="120" x="239" y="237.1606">Payment Intent</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="21" x="363" y="237.1606">url"</text><polygon fill="#D9D3D0" points="534,267.3594,544,271.3594,534,275.3594,538,271.3594" style="stroke:#D9D3D0;stroke-width:1.0;"/><line style="stroke:#D9D3D0;stroke-width:1.0;" x1="217" x2="540" y1="271.3594" y2="271.3594"/><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="75" x="224" y="266.2935">"open using</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="120" x="303" y="266.2935">Payment Intent</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="21" x="427" y="266.2935">url"</text><polygon fill="#D9D3D0" points="534,296.4922,544,300.4922,534,304.4922,538,300.4922" style="stroke:#D9D3D0;stroke-width:1.0;"/><line style="stroke:#D9D3D0;stroke-width:1.0;" x1="63" x2="540" y1="300.4922" y2="300.4922"/><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="132" x="70" y="295.4263">fill credit card details</text><polygon fill="#D9D3D0" points="228,340.7578,218,344.7578,228,348.7578,224,344.7578" style="stroke:#D9D3D0;stroke-width:1.0;"/><line style="stroke:#D9D3D0;stroke-width:1.0;" x1="222" x2="545" y1="344.7578" y2="344.7578"/><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="187" x="234" y="324.5591">redirect to confirmation page</text><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="305" x="234" y="339.6919">only TransactionID will be added to query string</text><polygon fill="#D9D3D0" points="702,369.8906,712,373.8906,702,377.8906,706,373.8906" style="stroke:#D9D3D0;stroke-width:1.0;"/><line style="stroke:#D9D3D0;stroke-width:1.0;" x1="217" x2="708" y1="373.8906" y2="373.8906"/><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="273" x="224" y="368.8247">get transaction details using TransactionID</text><polygon fill="#D9D3D0" points="228,399.0234,218,403.0234,228,407.0234,224,403.0234" style="stroke:#D9D3D0;stroke-width:1.0;"/><line style="stroke:#D9D3D0;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="222" x2="713" y1="403.0234" y2="403.0234"/><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="121" x="234" y="397.9575">Transaction details</text><line style="stroke:#D9D3D0;stroke-width:1.0;" x1="217" x2="259" y1="432.1563" y2="432.1563"/><line style="stroke:#D9D3D0;stroke-width:1.0;" x1="259" x2="259" y1="432.1563" y2="445.1563"/><line style="stroke:#D9D3D0;stroke-width:1.0;" x1="218" x2="259" y1="445.1563" y2="445.1563"/><polygon fill="#D9D3D0" points="228,441.1563,218,445.1563,228,449.1563,224,445.1563" style="stroke:#D9D3D0;stroke-width:1.0;"/><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="155" x="224" y="427.0903">store transaction details</text><polygon fill="#D9D3D0" points="74,470.2891,64,474.2891,74,478.2891,70,474.2891" style="stroke:#D9D3D0;stroke-width:1.0;"/><line style="stroke:#D9D3D0;stroke-width:1.0;" x1="68" x2="216" y1="474.2891" y2="474.2891"/><text fill="#D9D3D0" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="130" x="80" y="469.2231">payment completed</text><!--MD5=[0f4a9e5b3ad1257078b2a1a868f8aa63]
@startuml
!theme blueprint
participant "Consumer" as consumer
participant "Web Site" as website
participant "EasyCard Checkout" as checkout
participant "EasyCard API" as api

consumer->website: start payment
website->api: "Find existing <b>consumers</b> (by NationalID, ExternalReference, Email etc.)"
api- ->website: Existing consumers list
website->api: "Create new <b>Consumer</b> record if consumer does not exist in EasyCard"
api- ->website: "New <b>Consumer</b> record ID"
website->api: "create <b>Payment Intent</b> - use ConsumerID in request"
api- ->website: "<b>Payment Intent</b> url"
website->checkout : "open using <b>Payment Intent</b> url"
consumer->checkout : fill credit card details
checkout->website: redirect to confirmation page\nonly TransactionID will be added to query string
website->api:get transaction details using TransactionID
api- ->website: Transaction details
website->website: store transaction details
website->consumer: payment completed
@enduml

@startuml





<style>
  root {
    BackgroundColor #003153
    FontColor #D9D3D0
    FontName Verdana
    HyperLinkColor #D9D3D0
    LineColor #D9D3D0
    LineThickness 1
    Margin 5
  }
  caption {
    LineThickness 0
  }
  footer {
    LineThickness 0
  }
  header {
    LineThickness 0
  }
  node {
    MaximumWidth 300
  }
  title {
    FontSize 22
    LineThickness 0
  }
</style>

skinparam ArrowLollipopColor #D9D3D0
skinparam BackgroundColor #003153
skinparam DefaultFontName Verdana
skinparam DefaultMonospacedFontName Courier
skinparam LifelineStrategy nosolid
skinparam ParticipantPadding 10
skinparam SequenceLifeLineBorderColor #D9D3D0
skinparam Shadowing false
skinparam UseBetaStyle true

skinparam Activity {
  BackgroundColor #003153
  BarColor #D9D3D0
  BorderColor #D9D3D0
  FontColor #D9D3D0
  FontName Verdana
}
skinparam Boundary {
  FontColor #D9D3D0
}
skinparam Box {
  Padding 5
}
skinparam CircledCharacter {
  FontColor #D9D3D0
  FontName Courier
  Radius 9
}
skinparam Class {
  BackgroundColor #003153
  BorderColor #D9D3D0
  FontColor #D9D3D0
  FontName Verdana
}
skinparam ClassAttribute {
  FontColor #D9D3D0
  FontName Verdana
}
skinparam ClassStereotype {
  FontColor #D9D3D0
  FontName Verdana
}
skinparam Footer {
  FontColor #D9D3D0
  FontName Verdana
}
skinparam Header {
  FontColor #D9D3D0
  FontName Verdana
}
skinparam Hyperlink {
  Color #D9D3D0
}
skinparam IconPackage {
  Color #D9D3D0
  BackgroundColor #003153
}
skinparam IconPrivate {
  Color #D9D3D0
  BackgroundColor #003153
}
skinparam IconProtected {
  Color #D9D3D0
  BackgroundColor #003153
}
skinparam IconPublic {
  Color #D9D3D0
  BackgroundColor #003153
}
skinparam Note {
  FontColor #D9D3D0
  FontName Verdana
}
skinparam Object {
  BorderColor #D9D3D0
}
skinparam Package {
  BorderColor #D9D3D0
  FontColor #D9D3D0
  FontName Verdana
}
skinparam State {
  BackgroundColor #003153
  BorderColor #D9D3D0
}
skinparam StereotypeA {
  BackgroundColor #003153
  BorderColor #D9D3D0
}
skinparam StereotypeC {
  BackgroundColor #003153
  BorderColor #D9D3D0
}
skinparam StereotypeE {
  BackgroundColor #003153
  BorderColor #D9D3D0
}
skinparam StereotypeI {
  BackgroundColor #003153
  BorderColor #D9D3D0
}
skinparam StereotypeN {
  BackgroundColor #003153
  BorderColor #D9D3D0
}
skinparam UseCaseStereoType {
  FontColor #D9D3D0
  FontName Verdana
}
participant "Consumer" as consumer
participant "Web Site" as website
participant "EasyCard Checkout" as checkout
participant "EasyCard API" as api

consumer->website: start payment
website->api: "Find existing <b>consumers</b> (by NationalID, ExternalReference, Email etc.)"
api- ->website: Existing consumers list
website->api: "Create new <b>Consumer</b> record if consumer does not exist in EasyCard"
api- ->website: "New <b>Consumer</b> record ID"
website->api: "create <b>Payment Intent</b> - use ConsumerID in request"
api- ->website: "<b>Payment Intent</b> url"
website->checkout : "open using <b>Payment Intent</b> url"
consumer->checkout : fill credit card details
checkout->website: redirect to confirmation page\nonly TransactionID will be added to query string
website->api:get transaction details using TransactionID
api- ->website: Transaction details
website->website: store transaction details
website->consumer: payment completed
@enduml

PlantUML version 1.2022.3beta2(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>